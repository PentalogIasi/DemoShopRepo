function dragEnter(n){n.stopPropagation();n.preventDefault();$(n.target).addClass("over")}function dragLeave(n){n.stopPropagation();n.preventDefault();$(n.target).removeClass("over")}function drop(n){var t,r;if(n.stopPropagation(),n.preventDefault(),$(n.target).removeClass("over"),t=n.originalEvent.dataTransfer.files,t.length>0)if(window.FormData!==undefined){for(r=new FormData,i=0;i<t.length;i++)r.append("file"+i,t[i]);$.ajax({type:"POST",url:"/api/uploading",contentType:!1,processData:!1,data:r,success:function(n){$.each(n,function(){})}})}else alert("your browser sucks!")}function ViewModel(){function t(n,t){var i=this;i.Id=n.Id;i.Name=n.Name;i.Price=n.Price;i.Category=t;i.CategoryID=t;i.formattedPrice=ko.computed(function(){var t=n.Price;return t?"$"+t.toFixed(2):"None"})}function r(n){var t=this;t.name=n.name;t.path=n.path;t.size=n.size}var n=this,i;n.availableCategories=[{categoryName:"Groceries",ID:1},{categoryName:"Toys",ID:2},{categoryName:"Hardware",ID:3}];n.products=ko.observableArray();n.product=ko.observable();n.total=ko.observable();n.status=ko.observable();n.mashups=ko.observableArray();n.uploads=ko.observableArray();n.ArrayOfModels=ko.observableArray();n.userdata=ko.observable();i=[{DebtSolutionCreditorId:3,AccountNumber:"123456",AmountOwed:1e3,LenderId:48,NameOnAgreement:"test name",Repayment:200},{DebtSolutionCreditorId:4,AccountNumber:"123456",AmountOwed:6e3,LenderId:3,NameOnAgreement:"test name",Repayment:200}];n.creditors=ko.observableArray([]);n.showTotal=ko.computed(function(){var t=0;return ko.utils.arrayForEach(n.products(),function(n){var i=parseFloat(n.Price);isNaN(i)||(t+=i)}),t.toFixed(2)});n.removeProduct=function(t){n.products.remove(t)};n.getAll=function(){n.products.removeAll();$.getJSON("/api/products",function(i){$.each(i,function(i,r){var u;ko.utils.arrayFirst(n.availableCategories,function(n){n.categoryName==r.Category&&(u=n)});n.products.push(new t(r,u))})})};n.getById=function(){n.status("");var i=$("#productId").val();if(!i.length){n.status("ID is required");return}$.getJSON("api/products/"+i,function(i){n.product(new t(i));n.userdata=ko.mapping.fromJS(i)}).fail(function(t,i,r){n.product(null);n.status(r)})};n.update=function(){n.status("");var t=$("#productId").val(),i={Name:$("#name").val(),Price:$("#price").val(),Category:$("#category option:selected").text()};$.ajax({url:"api/products/"+t,cache:!1,type:"PUT",contentType:"application/json; charset=utf-8",data:ko.toJSON(i),success:n.getAll}).fail(function(t,i,r){n.status(r)})};n.create=function(){n.status("");var i={Name:$("#name2").val(),Price:$("#price2").val(),Category:$("#category2").val()};$.ajax({url:"api/products",cache:!1,type:"POST",contentType:"application/json; charset=utf-8",data:ko.toJSON(i),statusCode:{201:function(i){var r;ko.utils.arrayFirst(n.availableCategories,function(n){n.categoryName==i.Category&&(r=n)});n.products.push(new t(i,r))}}}).fail(function(t,i,r){n.status(r)})};n.currentPage=ko.observable();n.pageSize=ko.observable(10);n.currentPageIndex=ko.observable(0);n.currentPage;n.resultData=ko.observable();n.resultData1=ko.observable();$.getJSON("/api/mashup?topic=AT",function(t){n.resultData({topTweets:t.slice(0,50)});n.currentPage=ko.computed(function(){var t=parseInt(n.pageSize(),10),i=t*n.currentPageIndex(),r=i+t;n.resultData1({topTweets:n.resultData().topTweets.slice(i,r)})})});n.nextPage=function(){(n.currentPageIndex()+1)*n.pageSize()<n.resultData().topTweets.length?n.currentPageIndex(n.currentPageIndex()+1):n.currentPageIndex(0)};n.previousPage=function(){n.currentPageIndex()>0?n.currentPageIndex(n.currentPageIndex()-1):n.currentPageIndex(Math.ceil(n.resultData().topTweets.length/n.pageSize())-1)};$.getJSON("/api/uploading",function(t){$.each(t,function(t,i){n.uploads.push(new r(i))})});$.getJSON("/api/products",function(i){n.justCategories=ko.computed(function(){var n=ko.utils.arrayMap(i,function(n){return{categoryName:n.Category}});return n.sort()},n);$.each(i,function(i,r){var u;ko.utils.arrayFirst(n.availableCategories,function(n){n.ID==r.CategoryID&&(u=n)});n.products.push(new t(r,u))})});n.totalSum=ko.computed(function(){return 0})}function clearStatus(){$("#status").html("")}function add(){clearStatus();var n=ko.toJS(viewModel),t=ko.toJSON(n);$.ajax({url:API_URL,cache:!1,type:"POST",contentType:"application/json; charset=utf-8",data:t,statusCode:{201:function(n){self.products.push(n)}}})}$(document).ready(function(){var n=$("#ulbox");n.bind("dragenter",dragEnter);n.bind("dragleave",dragLeave);n.bind("drop",drop)});var viewModel=new ViewModel;ko.applyBindings(viewModel);$("#tabs").tabs();
/*
//# sourceMappingURL=Script.min.js.map
*/